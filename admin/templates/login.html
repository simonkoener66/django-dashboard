{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage.com</title>
    <!-- bootstrap -->
    <link rel="stylesheet" href="{% static "css/bootstrap/bootstrap.min.css" %}" />
    <!-- libraries -->
    <!-- <link href="css/libs/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" /> -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" />
    <!-- this page specific styles -->

    <!--link rel="stylesheet" href="{% static "css/libs/daterangepicker.css" %}" type="text/css" />
    <link rel="stylesheet" href="{% static "css/libs/select2.css" %}" type="text/css" /-->

    <!-- global styles -->
    <link rel="stylesheet" type="text/css" href="{% static "css/compiled/layout.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/compiled/elements.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/compiled/manage.css" %}">
    <!-- media queary -->
    <link rel="stylesheet" type="text/css" href="{% static "css/compiled/media-query.css" %}">
    <!-- Favicon -->
    <link type="image/x-icon" href="{% static "favicon.png" %}" rel="shortcut icon"/>

    <!-- google font libraries -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,600,700,300|Titillium+Web:200,300,400' rel='stylesheet' type='text/css'>

    <!--[if lt IE 9]>
		<script src="{% static "js/html5shiv.js" %}"></script>
		<script src="{% static "js/respond.min.js" %}"></script>
	<![endif]-->
    <!--[if lt IE 8]>
		<link href="{% static "css/libs/font-awesome-ie7.css" %}" type="text/css" rel="stylesheet" />
	<![endif]-->
    <style>
        #recover-msg, #recover-success {
            display: none;
        }
        #recover-waiting {
            top: 3px;
            margin-right: 5px;
            display: none;
        }
        .glyphicon-refresh-animate {
            -animation: spin 1s infinite linear;
            -webkit-animation: spin2 1s infinite linear;
        }

        @-webkit-keyframes spin2 {
            from { -webkit-transform: rotate(0deg);}
            to { -webkit-transform: rotate(360deg);}
        }

        @keyframes spin {
            from { transform: scale(1) rotate(0deg);}
            to { transform: scale(1) rotate(360deg);}
        }
    </style>
</head>
<body>
<header class="navbar" id="header-navbar" >
    <div class="container">
        <a href="/" id="logo" class="navbar-brand col-md-2 col-sm-3 col-xs-12">
            <img src="{% static "img/logo.png" %}" alt="Manage.com"/>
        </a>
        <div class="col-md-10 col-sm-9 col-xs-12">
            <div class="page-title-top">SALES DASHBOARD</div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row">

        <div class="col-md-12" id="content-wrapper">
            <div class="row">
                <div class="col-md-10 col-md-offset-1 manage-content">
                    {%  if login_failed %}
                    <div class="alert alert-danger fade in">
                        <strong>Incorrect email / password combination.</strong>
                    </div>
                    {%  endif %}
                    {% if messages %}
                        {% for m in messages %}
                            <div class="alert alert-{% if m.level == DEFAULT_MESSAGE_LEVELS.ERROR %}danger{% else %}success{% endif %}">
                                {{ m }}
                            </div>
                        {% endfor %}
                    {% endif %}
                    <div class="alert alert-success fade in" id="recover-success">
                        <strong>Please check your Inbox.</strong> Recovery instructions were sent to
                        your email address.
                    </div>

                    <div class="row">


                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 col-sm-push-3">
                            <div id="login-box">
                                <div class="row">
                                    <div class="col-xs-12 clearfix" id="login-box-header">
                                        <div class="login-box-header-blue"></div>
                                        <div class="login-box-header-black"></div>
                                        <div class="login-box-header-black"></div>
                                        <div class="login-box-header-black"></div>
                                        <div class="login-box-header-black"></div>
                                        <div class="login-box-header-black"></div>
                                    </div>
                                </div>
                                <div id="login-box-inner">
                                    <form role="form" method="post" action="">
                                        {% csrf_token %}
                                        <div class="input-group input-group-lg">
                                            <span class="input-group-addon"><i class="fa fa-user"></i></span>
                                            <input class="form-control" type="text" placeholder="Username" name="email" value="{{ email }}">
                                        </div>
                                        <div class="input-group input-group-lg">
                                            <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                            <input type="password" class="form-control" name="password" placeholder="Password" value="{{ password }}">
                                        </div>
                                        <div class="form-group">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox"> Remember me
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-6 col-xs-12 col-sm-push-6">
                                                <button type="submit" class="btn btn-primary col-xs-12">Login</button>
                                            </div>
                                            <a href="#" id="login-forget-link" data-toggle="modal" data-target="#myModal" class="col-sm-6 col-xs-12 col-sm-pull-6">
                                                Did you forget your password?
                                            </a>
                                        </div>
                                    </form>
                                </div>
                            </div> <!-- end of login-box -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer id="footer-bar">
    <p id="footer-copyright">
        &copy; {% now "Y" %} <a target="_blank" href="//www.manage.com/">Manage.com</a>
    </p>
</footer>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Recover Password</h4>
            </div>
            <form role="form" class="form-horizontal " method="post" action="">
                <div class="modal-body">
                    <div class="clearfix recover-form">
                        <div class="alert alert-danger" id="recover-msg"></div>
                            <div class="form-group">
                                <label for="email" class="col-md-3 col-sm-4  control-label">Email</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" id="email"  placeholder="user@company.com" required="required"/>
                                </div>
                            </div>

                        </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" id="close-modal" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="recover-password"><span id="recover-waiting" class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>Recover Passsword</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- global scripts -->
<script src="{% static "js/jquery.min.js" %}"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<!-- this page specific scripts -->
<!-- theme scripts -->
<script src="{% static "js/scripts.js" %}"></script>
<script>
    $(function() {
        $('#recover-password').click(function() {
            var email = $('#email').val();
            $('#recover-waiting').css('display', 'inline');
            $('#recover-password').attr('disabled', 'disabled');
            $.post('{% url 'api_recover_password' %}', {'email': email}, function(res) {
                $('#recover-waiting').css('display', 'none');
                $('#recover-password').removeAttr('disabled');
                if (!res.success) {
                    $('#recover-msg').text(res.msg).css('display', 'block').addClass('fade in');
                } else {
                    $('#recover-msg').css('display', 'none');
                    $('#close-modal').trigger('click');
                    $('#recover-success').css('display', 'block');
                }
            });
        });
    });
</script>
</body>
</html>